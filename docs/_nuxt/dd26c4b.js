(window.webpackJsonp=window.webpackJsonp||[]).push([[17,4,5,6],{542:function(t,e,r){"use strict";var n=r(6);r(62);function c(){return(c=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$store.getters["game/notCreated"]){t.next=3;break}return t.abrupt("return",e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$nuxt.$loading.start(),t.prev=1,t.next=4,e.$store.dispatch("game/getGame");case 4:return e.$nuxt.$loading.finish(),t.abrupt("return");case 8:return t.prev=8,t.t0=t.catch(1),console.error(t.t0),e.$nuxt.$loading.finish(),t.abrupt("return",e.$router.push({path:"/game/new"}));case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))));case 3:return t.abrupt("return");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.a=function(t){return c.apply(this,arguments)}},543:function(t,e,r){"use strict";var n=r(5),c=r(3),l=r(7),o=r(68),d=r(537),v=r(392),h=r(9),m=c.RangeError,_=c.String,f=Math.floor,y=l(v),C=l("".slice),k=l(1..toFixed),x=function(t,e,r){return 0===e?r:e%2==1?x(t,e-1,r*t):x(t*t,e/2,r)},w=function(data,t,e){for(var r=-1,n=e;++r<6;)n+=t*data[r],data[r]=n%1e7,n=f(n/1e7)},P=function(data,t){for(var e=6,r=0;--e>=0;)r+=data[e],data[e]=f(r/t),r=r%t*1e7},O=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=_(data[t]);s=""===s?e:s+y("0",7-e.length)+e}return s};n({target:"Number",proto:!0,forced:h((function(){return"0.000"!==k(8e-5,3)||"1"!==k(.9,0)||"1.25"!==k(1.255,2)||"1000000000000000128"!==k(0xde0b6b3a7640080,0)}))||!h((function(){k({})}))},{toFixed:function(t){var e,r,n,c,l=d(this),v=o(t),data=[0,0,0,0,0,0],h="",f="0";if(v<0||v>20)throw m("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return _(l);if(l<0&&(h="-",l=-l),l>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(l*x(2,69,1))-69)<0?l*x(2,-e,1):l/x(2,e,1),r*=4503599627370496,(e=52-e)>0){for(w(data,0,r),n=v;n>=7;)w(data,1e7,0),n-=7;for(w(data,x(10,n,1),0),n=e-1;n>=23;)P(data,1<<23),n-=23;P(data,1<<n),w(data,1,1),P(data,2),f=O(data)}else w(data,0,r),w(data,1<<-e,0),f=O(data)+y("0",v);return f=v>0?h+((c=f.length)<=v?"0."+y("0",v-c)+f:C(f,0,c-v)+"."+C(f,c-v)):h+f}})},545:function(t,e,r){"use strict";r.r(e);var n={data:function(){return{msg:""}},methods:{okClicked:function(){this.msg=""},show:function(t){this.msg=t}},computed:{}},c=r(23),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal",class:[t.msg?"is-active":""]},[r("div",{staticClass:"modal-background"}),t._v(" "),r("div",{staticClass:"modal-content"},[r("article",{staticClass:"message message is-warning"},[t._m(0),t._v(" "),r("div",{staticClass:"message-body is-size-5"},[r("div",{staticClass:"has-text-dark"},[t._v(t._s(t.msg))]),t._v(" "),r("div",{staticClass:"has-text-right"},[r("button",{staticClass:"button is-large light-shadow is-warning",on:{click:t.okClicked}},[r("span",{staticClass:"material-icons"},[t._v("done_outline")])])])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"message-header"},[r("p",{staticClass:"is-align-items-center is-flex"},[r("span",{staticClass:"material-icons mr-3"},[t._v("error_outline")]),t._v(" "),r("span",[t._v("Alert message")])])])}],!1,null,null,null);e.default=component.exports},546:function(t,e,r){"use strict";r.r(e);r(543);var n=r(1),c={props:{gameTime:String,contract:Object,tricks:Array},methods:{suitColor:function(t){var e=n.a.suitColor(t);return"card-".concat(e)},suitSymbol:n.a.suitIcon,cardUnicode:function(t){return n.a.cardUnicode(t)},deltaTricks:function(t){return t<0?"-".concat(Math.abs(t)):"+".concat(t)},percNormalization:function(t,e){switch(!0){case e+t==0:return 1;case 0==e&&t>0:return t/1;default:return t/e}}},computed:{attack:function(){return this.tricks&&this.tricks[0]&&this.tricks[0][0]},teamTricks:function(){return n.a.teamTricks(this.tricks)},totalTricks:function(){var t=this.tricks;return t&&t.length||0},targetTricks:function(){var t=this.contract,e=n.a.getPlayerTeam(t.player_id),r=n.a.getOpponentTeam(t.player_id),c={};return c[e]=6+t.value,c[r]=7-t.value,c},targetTricksPerc:function(){var t=this.teamTricks,e=this.targetTricks,r={};for(var n in e){var c=[t[n],e[n]],l=c[0],o=c[1],d=this.percNormalization(l,o);r[n]=(100*Math.abs(d)).toFixed(0)}return r}}},l=r(23),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("nav",{staticClass:"level"},[t.attack?r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading has-text-weight-bold"},[t._v("Attack")]),t._v(" "),r("p",{staticClass:"is-size-3 card-shape",class:[t.suitColor(t.attack.suit)]},[t._v("\n                    "+t._s(t.cardUnicode(t.attack.card_id))+"\n                ")])])]):t._e(),t._v(" "),t.contract?r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading has-text-weight-bold"},[t._v("NS / EW Trick Target %")]),t._v(" "),r("p",{staticClass:"is-size-3"},[r("span",[t._v(t._s(t.targetTricksPerc["north-south"])+"%")]),t._v(" "),r("span",{staticClass:"has-text-weight-light"},[t._v("-")]),t._v(" "),r("span",[t._v(t._s(t.targetTricksPerc["east-west"])+"%")])])])]):t._e(),t._v(" "),t.contract?r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading has-text-weight-bold"},[t._v("NS / EW Tricks")]),t._v(" "),r("p",{staticClass:"is-size-3"},[r("span",[t._v(t._s(t.teamTricks["north-south"]))]),t._v(" "),r("span",{staticClass:"has-text-weight-light"},[t._v("-")]),t._v(" "),r("span",[t._v(t._s(t.teamTricks["east-west"]))])])])]):t._e(),t._v(" "),r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading has-text-weight-bold"},[t._v("Time")]),t._v(" "),r("p",{staticClass:"has-text-weight-light is-size-3"},[t._v(t._s(t.gameTime))])])]),t._v(" "),t.contract?r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading has-text-weight-bold"},[t._v("NS / EW Trick Target")]),t._v(" "),r("p",{staticClass:"is-size-3"},[r("span",[t._v(t._s(t.targetTricks["north-south"]))]),t._v(" "),r("span",{staticClass:"has-text-weight-light"},[t._v("-")]),t._v(" "),r("span",[t._v(t._s(t.targetTricks["east-west"]))])])])]):t._e(),t._v(" "),t.contract?r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading has-text-weight-bold"},[t._v("Contract "+t._s(t.contract.player_id))]),t._v(" "),r("p",{staticClass:"is-size-3"},[r("strong",[t._v(t._s(t.contract.value))]),t._v(" "),r("strong",{staticClass:"card-suit is-uppercase",class:[t.suitColor(t.contract.trump)]},[t._v(t._s(t.suitSymbol(t.contract.trump)))]),t._v(" "),t.contract.double?r("small",{staticClass:"has-text-danger-dark has-text-weight-bold"},[t._v("X")]):t._e(),t._v(" "),t.contract.redouble?r("small",{staticClass:"has-text-info-dark has-text-weight-bold"},[t._v("XX")]):t._e()])])]):t._e()])])}),[],!1,null,null,null);e.default=component.exports},552:function(t,e,r){"use strict";r.r(e);r(538),r(1);var n={props:{taskName:String,isActive:Boolean,donePerc:Number,doneSteps:Number},methods:{cancelClicked:function(){this.isActive=!1,this.$emit("cancelClicked")}},computed:{}},c=r(23),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal",class:[t.isActive?"is-active":""]},[r("div",{staticClass:"modal-background"}),t._v(" "),r("div",{staticClass:"modal-card"},[r("header",{staticClass:"modal-card-head"},[r("p",{staticClass:"modal-card-title icon-text"},[r("span",{staticClass:"icon material-icons"},[t._v("settings_suggest")]),t._v(" "),r("span",[t._v(t._s(t.taskName)+" is running...")])])]),t._v(" "),r("section",{staticClass:"modal-card-body is-size-5"},[r("p",[t._v("A total of "+t._s(t.doneSteps)+" steps have currently been performed until now.")]),t._v(" "),r("div",{staticClass:"is-flex is-align-items-center mt-5"},[r("progress",{staticClass:"progress is-small is-success m-0",attrs:{max:"100"},domProps:{value:t.donePerc}},[t._v(t._s(t.donePerc)+"%")]),t._v(" "),r("div",{staticClass:"ml-3 is-size-7 is-italic has-text-weight-bold"},[t._v(t._s(t.donePerc)+"%")])])]),t._v(" "),r("footer",{staticClass:"modal-card-foot"},[r("button",{staticClass:"button is-medium",on:{click:t.cancelClicked}},[t._v("Cancel")])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Footer:r(96).default})},553:function(t,e,r){"use strict";r.r(e);r(26),r(95),r(33),r(78);var n=r(1),c={props:{contract:Object,score:Array},methods:{teamAbbr:function(t){var e=t.split("-");return e[0][0]+e[1][0]},deltaTricks:function(t){return t<0?"-".concat(Math.abs(t)):"+".concat(t)},onClickClose:function(){this.$emit("onClickClose")}},computed:{contractName:function(){var t=this.contract;return{suit:t.trump,value:t.id.split(" ")[0],card_id:t.id}},contractTeam:function(){return n.a.getPlayerTeam(this.contract.player_id)},winnerTeam:function(){var t=this.score.map((function(s){return s}));return t.sort((function(a,b){return b.score-a.score})),t[0].team_id}}},l=r(23),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal is-active"},[r("div",{staticClass:"modal-background"}),t._v(" "),r("div",{staticClass:"modal-card"},[t._m(0),t._v(" "),r("section",{staticClass:"modal-card-body"},[t._m(1),t._v(" "),r("p",{staticClass:"is-size-5 mb-6 has-text-centered has-text-weight-bold is-uppercase",class:[t.winnerTeam]},[t._v(t._s(t.winnerTeam))]),t._v(" "),r("div",{staticClass:"table-container"},[r("table",{staticClass:"table is-fullwidth has-text-centered has-text-weight-bold"},[t._m(2),t._v(" "),r("tbody",t._l(t.score,(function(s){return r("tr",{key:s.team_id},[r("td",{staticClass:"is-vcentered is-uppercase",class:[s.team_id]},[t._v(t._s(t.teamAbbr(s.team_id)))]),t._v(" "),r("td",{staticClass:"is-vcentered"},[s.contract?r("SingleCard",{staticClass:"has-text-centered",attrs:{card:t.contractName,cardSize:6}}):t._e()],1),t._v(" "),r("td",{staticClass:"is-vcentered"},[s.contract?r("span",[t._v(t._s(s.bonus_kind)+" +"+t._s(s.bonus))]):t._e()]),t._v(" "),r("td",{staticClass:"is-vcentered"},[t._v(t._s(s.score))]),t._v(" "),r("td",{staticClass:"is-vcentered"},[s.contract?r("span",[t._v(t._s(s.score+s.bonus))]):t._e(),t._v(" "),s.contract?t._e():r("span",[t._v(t._s(s.score))])]),t._v(" "),r("td",{staticClass:"is-vcentered"},[s.contract?r("span",[t._v(t._s(t.deltaTricks(s.winned_tricks-6-t.contract.value)))]):t._e(),t._v(" "),s.contract?t._e():r("span",[t._v(t._s(t.deltaTricks(s.winned_tricks-(7-t.contract.value))))]),t._v(" "),r("span",[t._v("("+t._s(s.winned_tricks)+")")])])])})),0)])])]),t._v(" "),r("footer",{staticClass:"modal-card-foot",staticStyle:{"justify-content":"center"}},[r("NuxtLink",{staticClass:"button is-medium is-light has-text-weight-bold light-shadow is-capitalized",attrs:{to:""},nativeOn:{click:function(e){return t.onClickClose()}}},[t._v("Close")]),t._v(" "),r("NuxtLink",{staticClass:"button is-medium is-success has-text-weight-bold light-shadow is-capitalized",attrs:{to:"/game/new"}},[t._v("New game")])],1)])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"modal-card-head"},[r("p",{staticClass:"modal-card-title icon-text"},[r("span",{staticClass:"icon material-icons"},[t._v("emoji_events")]),t._v(" "),r("span",[t._v("Scores")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"has-text-centered"},[r("span",{staticClass:"material-icons has-text-warning-dark"},[t._v("emoji_events")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("Team")]),t._v(" "),r("th",[t._v("Contract")]),t._v(" "),r("th",[t._v("Bonus")]),t._v(" "),r("th",[t._v("Score")]),t._v(" "),r("th",[t._v("Total score")]),t._v(" "),r("th",[t._v("Tricks")])])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{SingleCard:r(541).default,Footer:r(96).default})},554:function(t,e,r){"use strict";r.r(e);r(64);var n=r(1),c={props:{playerId:String},data:function(){return{trump:null,value:null}},methods:{suitColor:function(t){var e=n.a.suitColor(t);return"card-".concat(e)},suitSymbol:function(t){return n.a.suitIcon(t)},valueIcon:function(t){return n.a.cardValueIcon(t)},onSelectBid:function(t,e){var r=this.playerId;t&&(this.value=t),e&&(this.trump=e);var n={bid_id:null,player_id:r};["pass","double","redouble"].indexOf(t)>-1&&(this.value=null,this.trump=null,n.bid_id=t),this.value&&this.trump&&(n.bid_id="".concat(this.value," ").concat(this.trump)),n.bid_id&&(this.$emit("onSelectBid",n),this.value=null,this.trump=null)}},computed:{bidTrumps:n.a.bidTrumps,bidValues:n.a.bidValues}},l=r(23),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"block content is-unselectable"},[r("p",{staticClass:"card-suit is-size-6 has-text-weight-bold has-text-centered"},[t._l(t.bidValues,(function(e){return r("span",{key:e},[r("span",{staticClass:"card-text is-uppercase is-clickable mr-5",class:[e==t.value?"card-black":"has-text-grey"],on:{click:function(r){return t.onSelectBid(e,null)}}},[t._v(t._s(e))])])})),t._v(" "),t._l(t.bidTrumps,(function(e){return r("span",{key:e,class:[e==t.trump?t.suitColor(e):"has-text-grey","mr-5"]},[r("span",{staticClass:"card-text is-uppercase is-clickable",on:{click:function(r){return t.onSelectBid(null,e)}}},[t._v(t._s(t.suitSymbol(e)))])])})),t._v(" "),r("span",{staticClass:"mr-4 has-text-success-dark is-clickable",on:{click:function(e){return t.onSelectBid("pass",null)}}},[t._v("PASS")]),t._v(" "),r("span",{staticClass:"mr-4 has-text-danger-dark is-clickable",on:{click:function(e){return t.onSelectBid("double",null)}}},[t._v("X")]),t._v(" "),r("span",{staticClass:"mr-4 has-text-info-dark is-clickable",on:{click:function(e){return t.onSelectBid("redouble",null)}}},[t._v("XX")])],2)])}),[],!1,null,null,null);e.default=component.exports},555:function(t,e,r){"use strict";r.r(e);r(33),r(26),r(95);var n=r(1),c={props:{loopPlayers:Array,bids:Array},methods:{isNormalBid:function(t){return-1===["pass","double","redouble"].indexOf(t)},onClickPanel:function(){this.$emit("onClickPanel")},suitColor:function(t){var e=n.a.suitColor(t);return"card-".concat(e)},suitSymbol:function(t){return n.a.suitIcon(t)},valueIcon:function(t){return n.a.cardValueIcon(t)}},computed:{bidTrumps:n.a.bidTrumps,bidValues:n.a.bidValues,bidList:function(){return this.bids.map((function(b){return Object.assign({name:{suit:b.trump,value:b.id.split(" ")[0],card_id:b.id}},b)}))}}},l=r(23),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tile is-ancestor is-flex-wrap-wrap is-mobile is-clickable",on:{click:t.onClickPanel}},[t._l(t.loopPlayers,(function(e){return r("div",{key:e,staticClass:"tile is-3 is-parent"},[r("div",{staticClass:"tile is-child is-flex is-justify-content-center is-align-items-center"},[r("h4",{staticClass:"is-size-6 is-uppercase has-text-weight-bold"},[t._v(t._s(e))])])])})),t._v(" "),t._l(t.bidList,(function(b,i){return r("div",{key:i,staticClass:"tile is-3 is-parent"},[r("div",{staticClass:"tile is-child is-flex is-justify-content-center card-suit is-size-6 has-text-weight-bold"},[t.isNormalBid(b.id)?r("span",{staticClass:"card-text is-uppercase",class:[t.suitColor(b.name.suit)]},[t._v(t._s(b.name.value)+" "+t._s(t.suitSymbol(b.name.suit)))]):t._e(),t._v(" "),"pass"==b.id?r("span",{staticClass:"has-text-success-dark"},[t._v("PASS")]):t._e(),t._v(" "),"double"==b.id?r("span",{staticClass:"has-text-danger-dark"},[t._v("X")]):t._e(),t._v(" "),"redouble"==b.id?r("span",{staticClass:"has-text-info-dark"},[t._v("XX")]):t._e()])])}))],2)}),[],!1,null,null,null);e.default=component.exports},556:function(t,e,r){"use strict";r.r(e);r(34),r(14);var n={props:{playedCards:Array,shapeKind:{type:String,default:"cards"}},methods:{playedCardBy:function(t){var e=this.playedCards;return e&&e.length?e.filter((function(e){return e.player_id==t}))[0]:null},onClickPanel:function(){this.$emit("onClickPanel")}},computed:{cardSize:function(){return"chars"==this.shapeKind?4:1},playedCardSouth:function(){return this.playedCardBy("south")},playedCardWest:function(){return this.playedCardBy("west")},playedCardNorth:function(){return this.playedCardBy("north")},playedCardEast:function(){return this.playedCardBy("east")}}},c=r(23),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tile is-ancestor is-mobile is-clickable"},[r("div",{staticClass:"tile is-4 is-vertical is-parent"},[r("div",{staticClass:"tile is-child is-flex is-justify-content-center is-align-items-center"},[r("SingleCard",{attrs:{card:t.playedCardWest,missingPlaceholder:!0,shapeKind:t.shapeKind,cardSize:t.cardSize}})],1)]),t._v(" "),r("div",{staticClass:"tile is-4 is-vertical is-parent"},[r("div",{staticClass:"tile is-child is-flex is-justify-content-center"},[r("SingleCard",{attrs:{card:t.playedCardNorth,missingPlaceholder:!0,shapeKind:t.shapeKind,cardSize:t.cardSize}})],1),t._v(" "),r("div",{staticClass:"tile is-child"}),t._v(" "),r("div",{staticClass:"tile is-child is-flex is-justify-content-center"},[r("SingleCard",{attrs:{card:t.playedCardSouth,missingPlaceholder:!0,shapeKind:t.shapeKind,cardSize:t.cardSize}})],1)]),t._v(" "),r("div",{staticClass:"tile is-4 is-vertical is-parent"},[r("div",{staticClass:"tile is-child is-flex is-justify-content-center is-align-items-center"},[r("SingleCard",{attrs:{card:t.playedCardEast,missingPlaceholder:!0,shapeKind:t.shapeKind,cardSize:t.cardSize}})],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SingleCard:r(541).default})},577:function(t,e,r){"use strict";r.r(e);r(49),r(27),r(92),r(45),r(93);var n=r(6),c=r(57),l=(r(64),r(14),r(28),r(30),r(548),r(391),r(33),r(38),r(34),r(103),r(62),r(81)),o=r(542),d=r(1);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={layout:"play",data:function(){return{scoreModalOpen:!0,alertMsg:null,originalLoop:[],taskPlayOpts:{title:"",active:!1,cancel:!1,steps:0,donePerc:0},uiPlayOpts:{shapeKind:"cards",gameAnalysis:!1}}},methods:h(h({},Object(l.b)({incrementTimerClock:"game/incrementTimerClock",updateTimerClock:"game/updateTimerClock",applyUiPlayOptions:"game/applyUiPlayOptions",saveGame:"game/saveGame",autoContract:"game/autoContract",play:"game/play",undo:"game/undo"})),{},{playBid:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.playNext(null,t);case 2:return r.abrupt("return",!0);case 3:case"end":return r.stop()}}),r)})))()},playNext:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var c,l,o,v,h,m,_;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=r.gameState,l=r.players,o=r.playedCards,v=r.gameNotCreated,h=r.handEnded,m=r.isPlayerTurn,!v){n.next=3;break}return n.abrupt("return",r.showAlert("A new game must be created to play."));case 3:if(!h){n.next=5;break}return n.abrupt("return");case 5:if(!r.endBiddingAfter4Pass()){n.next=7;break}return n.abrupt("return",r.showAlert("After 4 pass, no contract is possible and a new game must be created."));case 7:if(null==e||m(e.player_id)){n.next=9;break}return n.abrupt("return",r.showAlert("This is not the turn of ".concat(e.player_id," player.")));case 9:if(null==e||"pass"==e.bid_id||!d.a.bidIsLower(e.bid_id,c.bids)){n.next=11;break}return n.abrupt("return",r.showAlert("Player ".concat(e.player_id," cannot bid less than or equal to the highest bid.")));case 11:if(null==t||m(t.player_id)){n.next=13;break}return n.abrupt("return",r.showAlert("This is not the turn of ".concat(t.player_id," player.")));case 13:if(!(null!=t&&o.length<4&&o.length>0&&t.suit!=o[0].suit)){n.next=18;break}if(_=o[0].suit,!(d.a.filterCardsBySuit(_,d.a.getPlayerCards(l,t.player_id)).length>0)){n.next=18;break}return n.abrupt("return",r.showAlert("Player ".concat(t.player_id," cannot play ").concat(t.suit," cards having ").concat(_," cards yet!")));case 18:return r.$nuxt.$loading.start(),n.prev=19,n.next=22,r.play({card:t,bid:e});case 22:n.next=28;break;case 24:n.prev=24,n.t0=n.catch(19),console.error(n.t0),d.a.showError(n.t0,r.$refs.alertModal);case 28:return r.$nuxt.$loading.finish(),n.abrupt("return",!0);case 30:case"end":return n.stop()}}),n,null,[[19,24]])})))()},playAuto:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$nuxt.$loading.start(),e.prev=1,e.next=4,t.play({auto:!0});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),d.a.showError(e.t0,t.$refs.alertModal);case 10:return t.$nuxt.$loading.finish(),e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[1,6]])})))()},playUndoAll:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.taskPlayOpts,e.prev=1,r.title="Undo all",r.steps=13-t.gameState.tricks.length,r.active=!0;case 5:return e.next=8,t.undo({steps:1});case 8:return e.next=10,d.a.delay(200);case 10:if(r.steps=13-t.gameState.tricks.length,r.donePerc=Math.round(r.steps/13*100),!(13==r.steps&&0==t.gameState.bids.length||r.cancel)){e.next=14;break}return e.abrupt("break",16);case 14:e.next=5;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0),d.a.showError(e.t0,t.$refs.alertModal);case 22:return r.cancel=!1,r.active=!1,e.abrupt("return",!0);case 25:case"end":return e.stop()}}),e,null,[[1,18]])})))()},playSolve:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.taskPlayOpts,n=t.contractWasDefined,e.prev=1,r.title="Auto play",r.steps=t.gameState.tricks.length,r.active=!0,n||t.autoContract();case 6:return e.next=9,t.play({auto:!0});case 9:return e.next=11,d.a.delay(200);case 11:if(r.steps=t.gameState.tricks.length,r.donePerc=Math.round(r.steps/13*100),!t.handEnded&&!r.cancel){e.next=15;break}return e.abrupt("break",17);case 15:e.next=6;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.error(e.t0),d.a.showError(e.t0,t.$refs.alertModal);case 23:return r.cancel=!1,r.active=!1,e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[1,19]])})))()},saveGameCheckpoint:function(){var t=this.gameState,data=JSON.stringify(t,null,4),e=new Blob([data],{type:"application/json"}),link=document.createElement("a");link.href=URL.createObjectURL(e),link.download="game.json",link.click()},playUndo:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$nuxt.$loading.start(),t.next=3,e.undo({steps:1});case 3:return e.scoreModalToggle(),e.$nuxt.$loading.finish(),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))()},scoreModalToggle:function(){this.scoreModalOpen=1!=this.scoreModalOpen},showAlert:function(t){d.a.showError(t,this.$refs.alertModal)},isPlayerTurn:function(t){return this.gameState.current_player===t},isDummyPartner:function(t){return d.a.getPartnerId(this.dummyPlayerId)==t},showDummyPartner:function(t){var e=this.playerSettings,r=this.dummyPlayerId,n=d.a.getPartnerId(r);return t==n&&("yes"==e[n].show_cards||"yes"==e[r].show_cards)},sideBySidePlayers:function(){var t=this.players;return(this.uiPlayOptions.inline_cards?["north","south","east","west"]:["north","east","south","west"]).map((function(e){return d.a.getPlayer(t,e)}))},playersData:function(t){var e=this.uiPlayOptions.other_player_cards,r=this.uiPlayOptions.player_panel_data,p=d.a.getPlayer(this.players,t);return h(h({},p),{},{show:e||"yes"==this.playerSettings[t].show_cards||p&&p.dummyIsActive&&p.dummy,showdata:r,isturn:this.isPlayerTurn(t)})},sideBySidePlayersData:function(){var t=this.playersData;return d.a.loopPlayers("north").map((function(p){return t(p)}))},endBiddingAfter4Pass:function(){return this.bids.length>3&&this.bids.slice(-4).every((function(b){return"pass"==b.id}))},biddingIsEnding:function(){return this.bids.length>3&&this.bids.slice(-3).every((function(b){return"pass"==b.id}))&&"pass"!=this.bids.slice(-4)[0].id},toggleGamePlayOptions:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.uiPlayOptions,(c=Object.assign({},n))[t]=1!=c[t],r.next=5,e.applyUiPlayOptions(c);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},setUiPlayOpts:function(t,e){this.uiPlayOpts[t]=e},getPlayerCards:d.a.getPlayerCards}),computed:h(h({},Object(l.c)({timerClock:"game/timerClock",playerSettings:"game/playerSettings",gameState:"game/all",gameNotCreated:"game/notCreated",players:"game/players",playedCards:"game/playedCards",bids:"game/bids",handEnded:"game/handEnded"})),{},{uiPlayOptions:function(){var t=this.gameState;return t&&t.settings&&t.settings.uiPlayOptions||{}},turnOfPlayerId:function(){return this.gameState.current_player},dummyPlayerId:function(){var t=this.players,e=t.length>0?t.filter((function(p){return p.dummy})):null;return e&&e.length>0&&e[0].id||null},dummyPlayer:function(){var t=this.dummyPlayerId,e=this.players;return t?d.a.getPlayer(e,t):null},contractWasDefined:function(){var t=this.gameState;return t&&t.contractWasDefined&&t.contractWasDefined()}}),mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.intervalTimerClock=setInterval((function(){t.incrementTimerClock(),t.$forceUpdate()}),1e3),e.next=3,Object(o.a)(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){clearInterval(this.intervalTimerClock)}},_=r(23),component=Object(_.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("AlertModal",{ref:"alertModal"}),t._v(" "),r("PlayTaskModal",{attrs:{taskName:t.taskPlayOpts.title,isActive:t.taskPlayOpts.active,doneSteps:t.taskPlayOpts.steps,donePerc:t.taskPlayOpts.donePerc},on:{cancelClicked:function(e){t.taskPlayOpts.cancel=!0}}}),t._v(" "),t.handEnded&&t.scoreModalOpen?r("ScoreModal",{attrs:{score:t.gameState.score,contract:t.gameState.contract},on:{onClickClose:t.scoreModalToggle}}):t._e(),t._v(" "),r("nav",{staticClass:"container panel"},[r("div",{staticClass:"panel-block is-block"},[r("PlayOverview",{attrs:{gameTime:t.timerClock.format("mm:ss"),contract:t.gameState.contract,tricks:t.gameState.tricks}})],1),t._v(" "),r("div",{staticClass:"panel-block is-block"},[r("div",{staticClass:"buttons is-centered"},[t.contractWasDefined?t._e():r("button",{staticClass:"button is-light is-success has-text-weight-bold",on:{click:t.autoContract}},[r("span",{staticClass:"icon is-small material-icons mr-1"},[t._v("gavel")]),t._v("Auto Contract")]),t._v(" "),t.contractWasDefined?r("button",{staticClass:"button is-light is-success has-text-weight-bold",on:{click:t.playAuto}},[r("span",{staticClass:"icon is-small material-icons mr-1"},[t._v("precision_manufacturing")]),t._v("AI Play")]):t._e(),t._v(" "),r("button",{staticClass:"button is-light has-text-weight-bold",on:{click:t.playUndo}},[r("span",{staticClass:"icon is-small material-icons mr-1"},[t._v("replay")]),t._v("Undo")]),t._v(" "),r("button",{staticClass:"button is-light has-text-weight-bold",on:{click:t.playSolve}},[r("span",{staticClass:"icon is-small material-icons mr-1"},[t._v("auto_awesome")]),t._v("AI Solve")]),t._v(" "),r("button",{staticClass:"button is-light has-text-weight-bold",on:{click:t.playUndoAll}},[r("span",{staticClass:"icon is-small material-icons mr-1"},[t._v("restart_alt")]),t._v("Undo All")]),t._v(" "),t.handEnded?r("button",{staticClass:"button is-light has-text-weight-bold",on:{click:t.scoreModalToggle}},[r("span",{staticClass:"icon is-small material-icons has-text-warning-dark mr-1"},[t._v("emoji_events")]),t._v("Results")]):t._e(),t._v(" "),r("button",{staticClass:"button is-light is-info has-text-weight-bold",on:{click:t.saveGameCheckpoint}},[r("span",{staticClass:"icon is-small material-icons mr-1"},[t._v("save")]),t._v("Save")]),t._v(" "),r("button",{staticClass:"button is-light is-warning has-text-weight-bold",on:{click:function(e){return t.setUiPlayOpts("gameAnalysis",!t.uiPlayOpts.gameAnalysis)}}},[r("span",{staticClass:"icon is-small material-icons mr-1"},[t._v(t._s(t.uiPlayOpts.gameAnalysis?"dashboard":"analytics"))]),t._v(t._s(t.uiPlayOpts.gameAnalysis?"Playground":"Game Analysis")+"\n                ")]),t._v(" "),r("div",{staticClass:"dropdown is-hoverable"},[t._m(0),t._v(" "),r("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu4",role:"menu"}},[r("div",{staticClass:"dropdown-content has-text-left is-vcentered"},[r("a",{staticClass:"dropdown-item",on:{click:t.playUndo}},[r("span",{staticClass:"material-icons is-size-5 mr-2"},[t._v("replay")]),t._v(" Undo last action")]),t._v(" "),r("a",{staticClass:"dropdown-item",on:{click:t.playAuto}},[r("span",{staticClass:"material-icons is-size-5 mr-2"},[t._v("precision_manufacturing")]),t._v(" AI play next card")]),t._v(" "),r("hr",{staticClass:"dropdown-divider"}),t._v(" "),r("a",{staticClass:"dropdown-item",on:{click:function(e){return t.toggleGamePlayOptions("player_panel_data")}}},[r("span",{staticClass:"material-icons is-size-5 mr-2"},[t._v("bar_chart")]),t._v(" "),0==t.uiPlayOptions.player_panel_data?r("span",[t._v("Show")]):t._e(),t._v(" "),1==t.uiPlayOptions.player_panel_data?r("span",[t._v("Hide")]):t._e(),t._v(" player points\n                            ")]),t._v(" "),r("a",{staticClass:"dropdown-item",on:{click:function(e){return t.toggleGamePlayOptions("other_player_cards")}}},[r("span",{staticClass:"material-icons is-size-5 mr-2"},[t._v("style")]),t._v(" "),0==t.uiPlayOptions.other_player_cards?r("span",[t._v("Show")]):t._e(),t._v(" "),1==t.uiPlayOptions.other_player_cards?r("span",[t._v("Hide")]):t._e(),t._v(" cards of all players\n                            ")]),t._v(" "),r("a",{staticClass:"dropdown-item",on:{click:function(e){return t.setUiPlayOpts("shapeKind","cards"==t.uiPlayOpts.shapeKind?"chars":"cards")}}},[r("span",{staticClass:"material-icons is-size-5 mr-2"},[t._v("margin")]),t._v(" Display\n                                "),"cards"==t.uiPlayOpts.shapeKind?r("span",[t._v("cards as text")]):t._e(),t._v(" "),"chars"==t.uiPlayOpts.shapeKind?r("span",[t._v("as cards")]):t._e()])])])])])]),t._v(" "),t.contractWasDefined||!t.turnOfPlayerId||t.biddingIsEnding()?t._e():r("div",{staticClass:"panel-block is-block"},[r("BiddingBoxPlayer",{attrs:{playerId:t.turnOfPlayerId},on:{onSelectBid:t.playBid}})],1)]),t._v(" "),t.uiPlayOpts.gameAnalysis?t._e():r("div",{staticClass:"columns is-multiline is-mobile"},[r("div",{staticClass:"column is-12 is-flex is-justify-content-center"},[r("PlayerCardHand",{attrs:{player:t.playersData("north"),shapeKind:t.uiPlayOpts.shapeKind},on:{onClickCard:t.playNext}})],1),t._v(" "),r("div",{staticClass:"column is-4 is-flex is-justify-content-end"},[r("PlayerCardHand",{attrs:{player:t.playersData("west"),shapeKind:t.uiPlayOpts.shapeKind},on:{onClickCard:t.playNext}})],1),t._v(" "),r("div",{staticClass:"column is-4 is-flex is-align-items-center"},[t.contractWasDefined?t._e():r("BiddingBoard",{attrs:{bids:t.bids,loopPlayers:t.gameState.loop_players},on:{onClickPanel:t.playNext}}),t._v(" "),t.contractWasDefined?r("Playground",{attrs:{playedCards:t.playedCards,shapeKind:t.uiPlayOpts.shapeKind},on:{onClickPanel:t.playNext}}):t._e()],1),t._v(" "),r("div",{staticClass:"column is-4 is-flex is-justify-content-start"},[r("PlayerCardHand",{attrs:{player:t.playersData("east"),shapeKind:t.uiPlayOpts.shapeKind},on:{onClickCard:t.playNext}})],1),t._v(" "),r("div",{staticClass:"column is-12 is-flex is-justify-content-center"},[r("PlayerCardHand",{attrs:{player:t.playersData("south"),shapeKind:t.uiPlayOpts.shapeKind},on:{onClickCard:t.playNext}})],1)]),t._v(" "),t.contractWasDefined&&t.gameState.settings&&t.uiPlayOpts.gameAnalysis?r("div",{staticClass:"container"},[r("GameAnalysis",{attrs:{players:t.sideBySidePlayersData(),contract:t.gameState.contract,tricks:t.gameState.tricks}})],1):t._e()],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dropdown-trigger"},[r("button",{staticClass:"button is-light",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu4"}},[r("span",{staticClass:"icon is-small material-icons",attrs:{"aria-hidden":"true"}},[t._v("menu")])])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{AlertModal:r(545).default,PlayTaskModal:r(552).default,ScoreModal:r(553).default,PlayOverview:r(546).default,BiddingBoxPlayer:r(554).default,PlayerCardHand:r(550).default,BiddingBoard:r(555).default,Playground:r(556).default,GameAnalysis:r(557).default})}}]);